import {
  VenueSettings,
  CancellationPolicy,
  TaxType,
  TaxDisplayMode,
  TaxCategory,
  type VenueTaxSettings,
  type VenueComplianceSettings,
  getDefaultGDPRSettings,
} from '@smartclub/types';

export const mockVenueSettings: Record<string, VenueSettings> = {
  // Dubai Sports Hub settings
  'venue-1': {
    id: 'settings-1',
    venueId: 'venue-1',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 180,
      advanceBookingDays: 30,
      minAdvanceHours: 2,
      cancellationPolicy: CancellationPolicy.FLEXIBLE,
      freeCancellationHours: 24,
      cancellationFeePercentage: 0,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 100,
      minParticipants: 2,
      maxParticipants: 4,
      allowRecurringBookings: true,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'dubai-sports-hub',
      primaryColor: '#ca8a04',
      secondaryColor: '#a16207',
      logoUrl: 'https://via.placeholder.com/200x80?text=Dubai+Sports+Hub',
      metaTitle: 'Dubai Sports Hub - Premier Sports Complex in Downtown Dubai',
      metaDescription: 'Book online padel courts in Dubai with world-class facilities',
      metaKeywords: 'padel, sports booking, Dubai sports, padel courts Dubai',
      instagramUrl: 'https://instagram.com/dubaisportshub',
      telegramUrl: 'https://t.me/dubaisportshub',
      whatsappNumber: '+971501234567',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'admin@dubai-sports-hub.ae',
      smsNotificationsEnabled: true,
      notificationPhone: '+971501234567',
      sendCustomerReminders: true,
      reminderHoursBefore: 24,
      sendPromotionalEmails: false,
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-1',
  },

  // GameLand Pasdaran settings
  'venue-2': {
    id: 'settings-2',
    venueId: 'venue-2',
    bookingRules: {
      minBookingDuration: 30,
      maxBookingDuration: 240,
      advanceBookingDays: 14,
      minAdvanceHours: 1,
      cancellationPolicy: CancellationPolicy.MODERATE,
      freeCancellationHours: 12,
      cancellationFeePercentage: 30,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 50000,
      minParticipants: 1,
      maxParticipants: 6,
      allowRecurringBookings: false,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'gameland-pasdaran',
      primaryColor: '#3b82f6',
      secondaryColor: '#2563eb',
      logoUrl: 'https://via.placeholder.com/200x80?text=GameLand',
      metaTitle: 'گیم‌لند پاسداران - پلی‌استیشن و بیلیارد',
      metaDescription: 'رزرو آنلاین پلی‌استیشن، بیلیارد و VR در پاسداران',
      instagramUrl: 'https://instagram.com/gamelandpasdaran',
      telegramUrl: 'https://t.me/gamelandpasdaran',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: false,
      notificationEmail: 'info@gameland.ir',
      smsNotificationsEnabled: false,
      notificationPhone: '',
      sendCustomerReminders: true,
      reminderHoursBefore: 12,
      sendPromotionalEmails: true,
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-2',
  },

  // Abi Pool settings
  'venue-3': {
    id: 'settings-3',
    venueId: 'venue-3',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 120,
      advanceBookingDays: 7,
      minAdvanceHours: 4,
      cancellationPolicy: CancellationPolicy.STRICT,
      freeCancellationHours: 48,
      cancellationFeePercentage: 50,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 200000,
      minParticipants: 1,
      maxParticipants: 30,
      allowRecurringBookings: true,
      requireApproval: true,
      instantExtensionEnabled: false,
    },
    whiteLabelSettings: {
      enabled: false,
      subdomain: 'abi-pool',
      primaryColor: '#06b6d4',
      secondaryColor: '#0891b2',
      metaTitle: 'استخر آبی - شنای حرفه‌ای و تفریحی',
      metaDescription: 'رزرو آنلاین استخر در تهران',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'manager@aquawellness-sharjah.ae',
      smsNotificationsEnabled: true,
      notificationPhone: '+971506789012',
      sendCustomerReminders: true,
      reminderHoursBefore: 48,
      sendPromotionalEmails: false,
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-3',
  },

  // Berlin Padel Center - Germany (GDPR required)
  'venue-de-1': {
    id: 'settings-de-1',
    venueId: 'venue-de-1',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 180,
      advanceBookingDays: 30,
      minAdvanceHours: 2,
      cancellationPolicy: CancellationPolicy.FLEXIBLE,
      freeCancellationHours: 24,
      cancellationFeePercentage: 0,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 30, // EUR
      minParticipants: 2,
      maxParticipants: 4,
      allowRecurringBookings: true,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'berlin-padel',
      primaryColor: '#dc2626',
      secondaryColor: '#b91c1c',
      logoUrl: 'https://via.placeholder.com/200x80?text=Berlin+Padel',
      metaTitle: 'Berlin Padel Center - Premium Padel Courts',
      metaDescription: 'Book padel courts online in Berlin with professional facilities',
      metaKeywords: 'padel, padel berlin, padel court booking',
      instagramUrl: 'https://instagram.com/berlinpadel',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'admin@berlin-padel.de',
      smsNotificationsEnabled: false,
      notificationPhone: '',
      sendCustomerReminders: true,
      reminderHoursBefore: 24,
      sendPromotionalEmails: false, // GDPR default: disabled
    },
    taxSettings: {
      id: 'tax-de-1',
      venueId: 'venue-de-1',
      taxEnabled: true,
      taxType: TaxType.VAT,
      taxIdNumber: 'DE123456789',
      taxIdLabel: 'USt-IdNr.',
      defaultTaxRate: 19,
      taxRateCategories: [
        {
          id: 'cat-de-standard',
          name: 'Standard',
          rate: 19,
          category: TaxCategory.STANDARD,
          isDefault: true,
        },
        {
          id: 'cat-de-reduced',
          name: 'Reduced',
          rate: 7,
          category: TaxCategory.REDUCED,
          description: 'Reduced rate for specific services',
          isDefault: false,
        },
      ],
      displayMode: TaxDisplayMode.INCLUSIVE,
      showTaxBreakdown: true,
      exemptions: [],
      invoiceSettings: {
        invoicePrefix: 'BPC',
        showTaxOnReceipts: true,
        legalNotice: 'USt-IdNr.: DE123456789',
        companyInfo: {
          name: 'Berlin Padel Center GmbH',
          registrationNumber: 'HRB 123456',
          address: 'Friedrichstraße 123, 10117 Berlin',
        },
      },
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-de-1',
    },
    complianceSettings: {
      id: 'compliance-de-1',
      venueId: 'venue-de-1',
      gdprEnabled: true,
      gdprSettings: {
        ...getDefaultGDPRSettings(),
        dataRetentionPeriodMonths: 36,
        autoDeleteInactiveAccounts: true,
        inactiveAccountThresholdMonths: 24,
        deletionRequestHandlingDays: 30,
      },
      dpoContact: {
        name: 'Dr. Hans Mueller',
        email: 'datenschutz@berlin-padel.de',
        phone: '+493012345679',
      },
      privacyPolicyUrl: 'https://berlin-padel.de/datenschutz',
      termsOfServiceUrl: 'https://berlin-padel.de/agb',
      cookiePolicyUrl: 'https://berlin-padel.de/cookies',
      minimumBookingAge: 16,
      ageVerificationRequired: false,
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-de-1',
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-de-1',
  },

  // Dubai Sports Hub - UAE (5% VAT)
  'venue-ae-1': {
    id: 'settings-ae-1',
    venueId: 'venue-ae-1',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 240,
      advanceBookingDays: 60,
      minAdvanceHours: 4,
      cancellationPolicy: CancellationPolicy.MODERATE,
      freeCancellationHours: 48,
      cancellationFeePercentage: 25,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 100, // AED
      minParticipants: 1,
      maxParticipants: 8,
      allowRecurringBookings: true,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'dubai-sports-hub',
      primaryColor: '#ca8a04',
      secondaryColor: '#a16207',
      logoUrl: 'https://via.placeholder.com/200x80?text=Dubai+Sports+Hub',
      metaTitle: 'Dubai Sports Hub - World-Class Sports Complex',
      metaDescription: 'Premium padel, tennis, and gaming facilities in Downtown Dubai',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'bookings@dubai-sports-hub.ae',
      smsNotificationsEnabled: true,
      notificationPhone: '+971501234567',
      sendCustomerReminders: true,
      reminderHoursBefore: 24,
      sendPromotionalEmails: true,
    },
    taxSettings: {
      id: 'tax-ae-1',
      venueId: 'venue-ae-1',
      taxEnabled: true,
      taxType: TaxType.VAT,
      taxIdNumber: '100123456789012',
      taxIdLabel: 'TRN',
      defaultTaxRate: 5,
      displayMode: TaxDisplayMode.INCLUSIVE,
      showTaxBreakdown: true,
      exemptions: [],
      invoiceSettings: {
        invoicePrefix: 'DSH',
        showTaxOnReceipts: true,
        legalNotice: 'TRN: 100123456789012',
      },
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-ae-1',
    },
    complianceSettings: {
      id: 'compliance-ae-1',
      venueId: 'venue-ae-1',
      gdprEnabled: false, // UAE has PDPL, not GDPR
      privacyPolicyUrl: 'https://dubai-sports-hub.ae/privacy',
      termsOfServiceUrl: 'https://dubai-sports-hub.ae/terms',
      minimumBookingAge: 18,
      ageVerificationRequired: false,
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-ae-1',
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-ae-1',
  },

  // LA Padel Club - USA (State Sales Tax)
  'venue-us-1': {
    id: 'settings-us-1',
    venueId: 'venue-us-1',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 180,
      advanceBookingDays: 30,
      minAdvanceHours: 2,
      cancellationPolicy: CancellationPolicy.FLEXIBLE,
      freeCancellationHours: 24,
      cancellationFeePercentage: 0,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 50, // USD
      minParticipants: 2,
      maxParticipants: 4,
      allowRecurringBookings: true,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'la-padel-club',
      primaryColor: '#0284c7',
      secondaryColor: '#0369a1',
      logoUrl: 'https://via.placeholder.com/200x80?text=LA+Padel+Club',
      metaTitle: 'LA Padel Club - Premier Padel in Los Angeles',
      metaDescription: 'Book outdoor padel courts in West Hollywood with stunning views',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'bookings@la-padel-club.com',
      smsNotificationsEnabled: true,
      notificationPhone: '+13105551234',
      sendCustomerReminders: true,
      reminderHoursBefore: 24,
      sendPromotionalEmails: true,
    },
    taxSettings: {
      id: 'tax-us-1',
      venueId: 'venue-us-1',
      taxEnabled: true,
      taxType: TaxType.SALES_TAX,
      taxIdNumber: '12-3456789',
      taxIdLabel: 'EIN',
      defaultTaxRate: 9.5, // CA state (7.25%) + LA county (2.25%)
      displayMode: TaxDisplayMode.EXCLUSIVE, // US shows tax separately
      showTaxBreakdown: true,
      exemptions: [],
      invoiceSettings: {
        invoicePrefix: 'LAPC',
        showTaxOnReceipts: true,
        legalNotice: 'Sales tax collected for California',
      },
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-us-1',
    },
    complianceSettings: {
      id: 'compliance-us-1',
      venueId: 'venue-us-1',
      gdprEnabled: false, // US doesn't have federal GDPR
      privacyPolicyUrl: 'https://la-padel-club.com/privacy',
      termsOfServiceUrl: 'https://la-padel-club.com/terms',
      minimumBookingAge: 18,
      ageVerificationRequired: false,
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-us-1',
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-us-1',
  },

  // Barcelona Padel World - Spain (GDPR + 21% IVA)
  'venue-es-1': {
    id: 'settings-es-1',
    venueId: 'venue-es-1',
    bookingRules: {
      minBookingDuration: 60,
      maxBookingDuration: 180,
      advanceBookingDays: 14,
      minAdvanceHours: 2,
      cancellationPolicy: CancellationPolicy.MODERATE,
      freeCancellationHours: 12,
      cancellationFeePercentage: 20,
      noShowPenaltyEnabled: true,
      noShowPenaltyAmount: 25, // EUR
      minParticipants: 2,
      maxParticipants: 4,
      allowRecurringBookings: true,
      requireApproval: false,
      instantExtensionEnabled: true,
    },
    whiteLabelSettings: {
      enabled: true,
      subdomain: 'barcelona-padel-world',
      primaryColor: '#f59e0b',
      secondaryColor: '#d97706',
      logoUrl: 'https://via.placeholder.com/200x80?text=Barcelona+Padel',
      metaTitle: 'Barcelona Padel World - El Mejor Club de Pádel',
      metaDescription: 'Reserva pistas de pádel online en Barcelona con instalaciones de clase mundial',
    },
    notificationPreferences: {
      emailNotificationsEnabled: true,
      notifyOnNewBooking: true,
      notifyOnCancellation: true,
      notifyOnNoShow: true,
      notificationEmail: 'reservas@barcelona-padel-world.es',
      smsNotificationsEnabled: true,
      notificationPhone: '+34612345678',
      sendCustomerReminders: true,
      reminderHoursBefore: 24,
      sendPromotionalEmails: false,
    },
    taxSettings: {
      id: 'tax-es-1',
      venueId: 'venue-es-1',
      taxEnabled: true,
      taxType: TaxType.VAT,
      taxIdNumber: 'ES12345678A',
      taxIdLabel: 'NIF/CIF',
      defaultTaxRate: 21,
      taxRateCategories: [
        {
          id: 'cat-es-standard',
          name: 'General',
          rate: 21,
          category: TaxCategory.STANDARD,
          isDefault: true,
        },
        {
          id: 'cat-es-reduced',
          name: 'Reducido',
          rate: 10,
          category: TaxCategory.REDUCED,
          isDefault: false,
        },
      ],
      displayMode: TaxDisplayMode.INCLUSIVE,
      showTaxBreakdown: true,
      exemptions: [],
      invoiceSettings: {
        invoicePrefix: 'BPW',
        showTaxOnReceipts: true,
        legalNotice: 'IVA incluido. NIF: ES12345678A',
        companyInfo: {
          name: 'Barcelona Padel World S.L.',
          registrationNumber: 'B12345678',
          address: 'Carrer de Balmes 145, 08008 Barcelona',
        },
      },
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-es-1',
    },
    complianceSettings: {
      id: 'compliance-es-1',
      venueId: 'venue-es-1',
      gdprEnabled: true,
      gdprSettings: {
        ...getDefaultGDPRSettings(),
        dataRetentionPeriodMonths: 24,
        deletionRequestHandlingDays: 30,
      },
      dpoContact: {
        name: 'María García',
        email: 'privacidad@barcelona-padel-world.es',
      },
      privacyPolicyUrl: 'https://barcelona-padel-world.es/privacidad',
      termsOfServiceUrl: 'https://barcelona-padel-world.es/condiciones',
      minimumBookingAge: 16,
      ageVerificationRequired: false,
      updatedAt: new Date().toISOString(),
      updatedBy: 'user-owner-es-1',
    },
    updatedAt: new Date().toISOString(),
    updatedBy: 'user-owner-es-1',
  },
};

// Helper to get settings by venue ID
export function getVenueSettings(venueId: string): VenueSettings | undefined {
  return mockVenueSettings[venueId];
}

// Helper to update settings
export function updateVenueSettings(
  venueId: string,
  updates: Partial<VenueSettings>
): VenueSettings {
  const current = mockVenueSettings[venueId];
  if (!current) {
    throw new Error('Venue settings not found');
  }

  const updated = {
    ...current,
    ...updates,
    updatedAt: new Date().toISOString(),
  };

  mockVenueSettings[venueId] = updated;
  return updated;
}
